# 十三、计算机指令的执行过程
假设有两条指令
## 1、指令执行过程的一般操作
取第一条指令——分析第一条指令——执行第一条指令——取第二条指令——分析第二条指令——执行第二条指令

取指令（从指令缓存中取指令送到指令寄存器）
——》分析指令（将指令从寄存器中拿出来送到指令译码器中进行相关译码，接着指令译码器发出相关控制信号，同时程序计数器+1指向下一条指令）
——》执行指令（首先将数据装载到寄存器，接着ALU开始处理相关数据，接着记录运算状态、如果有进位或者溢出的话会记录到状态寄存器里去，最好将运算结果送出来）

**主要问题**
取指令或者分析指令的时候主要是由控制器工作，执行指令时只要由运算器进行工作，运算器和控制器不能同时工作，这就`导致了CPU的综合利用率并不高`，因此需要改进指令执行的过程来提高CPU综合利用率。

## 2、CPU流水线设计
**CPU流水线设计思想**类似于工厂的装配线，工厂的装配线使得多个产品可以同时被加工，其中在同一个时刻，不同的产品位于不同的加工阶段。

取第一条指令
——分析第一条指令的同时 + 取第二条指令
——执行第一条指令时 + 分析第二条指令
——执行第二条指令

`CPU使用流水线设计执行指令的样子，每一个时间片都有一条或多条指令的执行`
|指令|时间片|时间片|时间片|时间片|时间片|时间片|时间片|时间片
-|-|-|-|-|-|-|-|-|-|-|-
1|取指令|分析指令|执行指令
2||取指令|分析指令|执行指令
3|||取指令|分析指令|执行指令
4||||取指令|分析指令|执行指令
5|||||取指令|分析指令|执行指令
6||||||取指令|分析指令|执行指令

使用流水线设计大大提升了CPU的使用效率，假设取指令分析指令执行指令所用时间都一样为t
串行执行m条指令：T1 = 3t*m；
流水线执行m条命令：T2  =  t *(m+2);
效率的提升 H=T2/T1 = 1/3 + 1/3m;
可以`理想化把流水线设计看成是串行的三倍`
